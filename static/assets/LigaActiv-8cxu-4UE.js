import{u as j,j as e,r as l,D as w}from"./index-CmWV6iY9.js";import{H as L}from"./Header-C_u7GVSR.js";import{i as f}from"./imgCoin-C6EPuP39.js";import{u as B,q as p,x as A}from"./gueryClient-DeKJ6wb-.js";import{b as N,u as h,f as F}from"./formatNumber-DvWf_IGP.js";import{i as $}from"./avatarFrend-CDr8Usu-.js";const S="_container_3oei2_1",U="_box_league_3oei2_10",D="_imgBoxFon_3oei2_20",H="_name_league_3oei2_25",P="_imgEnot_3oei2_42",z="_btn_left_3oei2_48",I="_btn_right_3oei2_66",O="_box_progress_3oei2_84",Q="_progress_3oei2_93",V="_progress_bar_3oei2_103",X="_title_cost_3oei2_114",J="_iconCoin_3oei2_127",K="_box_all_users_3oei2_134",s={container:S,box_league:U,imgBoxFon:D,name_league:H,imgEnot:P,btn_left:z,btn_right:I,box_progress:O,progress:Q,progress_bar:V,title_cost:X,iconCoin:J,box_all_users:K},R="_box_card_n29iq_1",W="_box_your_card_n29iq_11",Z="_imgAvatar_n29iq_25",T="_user_info_n29iq_35",Y="_name_user_n29iq_44",G="_coin_window_n29iq_56",M="_coins_n29iq_61",ee="_imgCoin_n29iq_75",se="_line_n29iq_88",ne="_number_position_n29iq_96",ae="_leaders_n29iq_105",te="_text_index_n29iq_115",n={box_card:R,box_your_card:W,imgAvatar:Z,user_info:T,name_user:Y,coin_window:G,coins:M,imgCoin:ee,line:se,number_position:ne,leaders:ae,text_index:te};function oe({user:o,index:g}){const{tg_id:r}=j();return e.jsxs("div",{className:+r!==o.tg_id?n.box_card:n.box_your_card,children:[e.jsx("img",{src:$,className:n.imgAvatar}),e.jsxs("div",{className:n.user_info,children:[e.jsx("p",{className:n.name_user,children:o.name}),e.jsxs("div",{className:n.coin_window,children:[e.jsx("img",{src:f,className:n.imgCoin}),e.jsx("p",{className:n.coins,children:N(o.coin)})]})]}),e.jsx("div",{className:g<=3?`${n.number_position} ${n.leaders}`:n.number_position,children:e.jsx("p",{className:n.text_index,children:g})}),+r!==o.tg_id&&e.jsx("div",{className:n.line})]})}const ie="/assets/woodenEnot-BVv5zd6W.png",re="/assets/stoneEnot-BzhVZHcx.png",ce="/assets/ironEnot-DSQv0t38.png",_e="/assets/bronzeEnot-9eJgkS59.png",me="/assets/silverEnot-CWlVjY3g.png",le="/assets/goldEnot-D8RmB_l8.png",ge="/assets/platinumEnot-BUOACsjX.png",de="/assets/rubyEnot-CvX7weox.png",ue="/assets/emeraldEnot-DhJs5jX5.png",xe="/assets/sapphireEnot-ByZ5PEka.png",be=o=>{switch(o){case"Деревянная Лига":return ie;case"Каменная Лига":return re;case"Железная Лига":return ce;case"Бронзовая Лига":return _e;case"Серебряная Лига":return me;case"Золотая Лига":return le;case"Платиновая Лига":return ge;case"Рубиновая Лига":return de;case"Изумрудная Лига":return ue;case"Сапфировая Лига":return xe}},pe="/assets/bgLeague-B0AfPP7P.png";function Ee(){const{tg:o,tg_id:g}=j(),r=h(i=>{var c;return(c=i.dataUser.getUser)==null?void 0:c.coin}),v=h(i=>{var c;return(c=i.dataUser.getUser)==null?void 0:c.league})||g,[t,C]=l.useState(),[d,E]=l.useState(),[_,a]=l.useState(0),[u,b]=l.useState(v),x=[{name:"Деревянная Лига",id:1},{name:"Каменная Лига",id:2},{name:"Железная Лига",id:3},{name:"Бронзовая Лига",id:4},{name:"Серебряная Лига",id:5},{name:"Золотая Лига",id:6},{name:"Платиновая Лига",id:7},{name:"Изумрудная Лига",id:8},{name:"Рубиновая Лига",id:9},{name:"Сапфировая Лига",id:10}],{data:m}=B({queryKey:["dataLeagues"],queryFn:()=>A(u),enabled:!!u},p);l.useEffect(()=>{if(m)switch(C(m),E(m[0].players),m[0].name){case"Деревянная Лига":a(0);break;case"Каменная Лига":a(1);break;case"Железная Лига":a(2);break;case"Бронзовая Лига":a(3);break;case"Серебряная Лига":a(4);break;case"Золотая Лига":a(5);break;case"Платиновая Лига":a(6);break;case"Изумрудная Лига":a(7);break;case"Рубиновая Лига":a(8);break;case"Сапфировая Лига":a(9);break}},[m]),l.useEffect(()=>{p.invalidateQueries({queryKey:["dataLeagues"]})},[u]);const y=()=>{_<x.length-1&&(a(_+1),b(x[_+1].name),o.HapticFeedback.impactOccurred("light"))},q=()=>{_>0&&(a(_-1),b(x[_-1].name),o.HapticFeedback.impactOccurred("light"))},k=()=>{if(t&&r&&t[0].min_coin)return r*100/(t[0].min_coin*10)};return e.jsxs(w,{children:[e.jsx(L,{}),e.jsxs("div",{className:s.container,children:[e.jsxs("div",{className:s.box_league,children:[e.jsx("img",{className:s.imgBoxFon,src:pe}),(t==null?void 0:t.length)&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:s.name_league,children:t[0].name}),e.jsx("img",{className:s.imgEnot,src:be(t[0].name)})]}),e.jsx("button",{onClick:()=>q(),className:s.btn_left}),e.jsx("button",{onClick:()=>y(),className:s.btn_right}),e.jsxs("div",{className:s.box_progress,children:[e.jsx("img",{src:f,className:s.iconCoin}),m&&t&&r&&e.jsx("span",{className:s.title_cost,children:`${N(r)} / ${F(t[0].min_coin*10)}`})]}),(d==null?void 0:d.filter(i=>i.tg_id===+g).length)===1&&e.jsx("div",{className:s.progress,children:e.jsx("div",{className:s.progress_bar,style:{width:`${k()}%`}})})]}),e.jsx("div",{className:s.box_all_users,children:d&&d.map((i,c)=>e.jsx(oe,{user:i,index:c+1},i.tg_id))})]})]})}export{Ee as default};
