import{j as s,u as q,r as c,m as Q,n as $,o as G,D as K}from"./index-C3sJZs0J.js";import{H as L}from"./Header-CaWUpAr_.js";import{b as E,a as A,u as k}from"./useMutation-Dl7nUhGQ.js";import{h as T,q as g,i as w,u as H,j as I}from"./gueryClient-DlBsWjW3.js";const M="_root_kosd9_1",O="_container_kosd9_14",U="_box_kosd9_23",X="_imgBox1_kosd9_35",Y="_imgEnotBack_kosd9_46",Z="_slogan_kosd9_57",J="_show_kosd9_1",m={root:M,container:O,box:U,imgBox1:X,imgEnotBack:Y,slogan:Z,show:J},z="/assets/coinPrize-CayVTFUQ.png",d="/assets/energyPrize-CL1jtWuk.png",B="/assets/diamondsPrize-B0oiZMmn.png",P="/assets/botPrize-CLn2oDfX.png",R="/assets/skinPrize-Csi9GH01.png",v="/assets/box1-D3XQbKnU.png",C="/assets/box2-_a3OpZPI.png",D="/assets/box3-BQ05YlqY.png",V="/assets/EnotBackground-DEyn0Py-.png",W="_container_box_prize_1naer_1",ss="_box_prize_1naer_11",es="_imgEnotFace_1naer_17",os="_loot_box_1naer_28",is="_imgBox_1naer_36",ns="_imgBumble_1naer_43",ts="_box_info_prize_1naer_51",rs="_possible_prize_1naer_61",cs="_title_prize_1naer_76",as="_box_getting_prize_1naer_89",_s="_getting_prize_1naer_95",ms="_imgPrize_1naer_104",xs="_imgPrize1_1naer_108",gs="_icon_prize_1naer_112",o={container_box_prize:W,box_prize:ss,imgEnotFace:es,loot_box:os,imgBox:is,imgBumble:ns,box_info_prize:ts,possible_prize:rs,title_prize:cs,box_getting_prize:as,getting_prize:_s,imgPrize:ms,imgPrize1:xs,icon_prize:gs},ls="_btn_1sx9u_1",ps="_btn2_1sx9u_16",F={btn:ls,btn2:ps};function bs({...t}){return s.jsx("button",{...t,className:F.btn,children:"Получить"})}const us="/assets/EnotFaceBackground-CJx_fDe-.png",zs="/assets/bumbleLight-_3kQzhIG.png";function ds({...t}){return s.jsx("button",{...t,className:F.btn2,children:"Забрать"})}function y({box:t,lootBox1:i,imgBox:p}){const{tg_id:a}=q(),[_,l]=c.useState([]),[r,b]=c.useState(),{mutate:x}=E({mutationFn:e=>T(e.name_box,e.tg_id),onSuccess:e=>{l(e),g.invalidateQueries({queryKey:["userData"]}),g.invalidateQueries({queryKey:["boxesData"]})}},g),j=E({mutationFn:e=>w(e.prizes,e.tg_id),onSuccess:e=>{b(e),g.invalidateQueries({queryKey:["userData"]}),g.invalidateQueries({queryKey:["boosterData"]})},onError:e=>{console.log(e)}},g),[u,h]=c.useState(1),N=()=>{(i==null?void 0:i.name)==="Bronze"&&x({name_box:"Bronze",tg_id:a}),(i==null?void 0:i.name)=="Silver"&&x({name_box:"Silver",tg_id:a}),(i==null?void 0:i.name)=="Gold"&&x({name_box:"Gold",tg_id:a}),h(2)},f=()=>{j.mutate({tg_id:a,prizes:_}),l([])};return c.useEffect(()=>{console.log(_)},[_]),s.jsxs("div",{className:o.container_box_prize,children:[s.jsx("img",{src:us,className:o.imgEnotFace}),u==1&&s.jsxs("div",{className:o.box_prize,children:[s.jsxs("div",{className:o.loot_box,children:[s.jsx("img",{src:zs,className:o.imgBumble}),s.jsx("img",{className:o.imgBox,src:t})]}),s.jsxs("div",{className:o.box_info_prize,children:[s.jsx("p",{className:o.title_prize,children:"Ты можешь получить:"}),s.jsx("div",{className:o.possible_prize,children:p.map((e,n)=>s.jsx("img",{className:o.icon_prize,src:e},n))}),s.jsx(bs,{onClick:N})]})]}),u==2&&s.jsxs("div",{className:o.box_getting_prize,children:[r?s.jsx("p",{className:o.title_prize,children:r.Success}):s.jsx("p",{className:o.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:o.getting_prize,children:_.map((e,n)=>{if(e.prize_name==="Coin Boosts")return s.jsx("img",{className:o.imgPrize,src:z},n);if(e.prize_name==="Energy Boosts")return s.jsx("img",{className:o.imgPrize,src:d},n);if(e.prize_name==="Dimonds")return s.jsx("img",{className:o.imgPrize,src:B},n);if(e.prize_name==="Bot Boosts")return s.jsx("img",{className:o.imgPrize,src:P},n)})}),!r&&s.jsx(ds,{onClick:f,title:"Забрать"})]})]})}const Bs="_box_mth5q_1",js="_imgBox1_mth5q_13",S={box:Bs,imgBox1:js},hs=({onClick:t,imgBox:i})=>s.jsx("div",{onClick:t,className:S.box,children:s.jsx("img",{className:S.imgBox1,src:i})}),Ns=c.memo(hs);function Es(){const{tg_id:t}=q(),[i,p]=c.useState(0),a=A(),[_,l]=c.useState([]),{data:r}=H({queryKey:["boxesData"],queryFn:()=>I(t)},g);c.useEffect(()=>{r&&(a(Q(r[0])),a($(r[1])),a(G(r[2])))},[r]);const[b,x]=c.useState(""),j=k(n=>n.lootBox1.box),u=k(n=>n.lootBox2.box),h=k(n=>n.lootBox3.box),N=()=>{p(1),x(v),l([z,d,B])},f=()=>{p(2),x(C),l([z,d,B,P])},e=()=>{p(3),x(D),l([z,d,B,P,R])};return s.jsxs(K,{children:[s.jsx(L,{}),s.jsxs("div",{className:m.root,children:[i==0&&s.jsxs("div",{children:[s.jsx("h1",{className:m.slogan,children:"Текст призыв нажать на сундук"}),s.jsx("img",{src:V,className:m.imgEnotBack})]}),i==1&&s.jsx(y,{box:b,lootBox1:j,imgBox:_}),i==2&&s.jsx(y,{box:b,lootBox1:u,imgBox:_}),i==3&&s.jsx(y,{box:b,lootBox1:h,imgBox:_}),s.jsxs("div",{className:m.container,children:[s.jsx(Ns,{imgBox:v,onClick:N}),s.jsx("div",{onClick:f,className:m.box,children:s.jsx("img",{className:m.imgBox1,src:C})}),s.jsx("div",{onClick:e,className:m.box,children:s.jsx("img",{className:m.imgBox1,src:D})})]})]})]})}export{Es as default};
