import{j as s,u as O,r as u,i as q,k as G,l as H,D as Q}from"./index-1YJft3eP.js";import{i as F}from"./imgCoin-DwLBqyid.js";import{H as T}from"./Header-BDCArFao.js";import{u as S}from"./useMutation-DOi45t7A.js";import{h as K,q as f,i as V,u as Y,j as L}from"./gueryClient-DgL_mgrH.js";import{u as w,f as E,a as M}from"./formatNumber-Cknb30_a.js";const X="_root_1lfwx_1",Z="_cost_window_1lfwx_14",J="_container_1lfwx_30",$="_fon_1lfwx_40",ss="_box_1lfwx_48",is="_imgEnotBack_1lfwx_53",es="_slogan_1lfwx_65",ts="_text_slogan_1lfwx_85",ns="_imgCoin_1lfwx_103",os="_cost_text_1lfwx_111",b={root:X,cost_window:Z,container:J,fon:$,box:ss,imgEnotBack:is,slogan:es,text_slogan:ts,imgCoin:ns,cost_text:os},B="/assets/coinPrize-BsQWk6-a.png",A="/assets/energyPrize-C6pF5lWi.png",h="/assets/diamondsPrize-CaNP9zhv.png",D="/assets/botPrize-CD0cXvET.png",cs="/assets/skinPrize-Csi9GH01.png",U="/assets/box1-D3XQbKnU.png",W="/assets/box2-_a3OpZPI.png",I="/assets/box3-BQ05YlqY.png",as="/assets/imgFon-dCH78UyA.png",rs="_container_box_prize_7nygw_1",_s="_fon_7nygw_11",ms="_box_prize_7nygw_19",gs="_imgEnotFace_7nygw_27",xs="_loot_box_7nygw_39",ls="_imgBox_7nygw_47",ps="_imgBumble_7nygw_54",bs="_box_info_prize_7nygw_62",ds="_possible_prize_7nygw_72",us="_title_prize1_7nygw_88",zs="_title_prize_7nygw_88",fs="_box_getting_prize_7nygw_121",js="_getting_prize_7nygw_131",ws="_imgPrize_7nygw_140",Ns="_imgPrize1_7nygw_144",Bs="_icon_prize_7nygw_148",As="_cost_window_7nygw_155",hs="_cost_text_7nygw_171",ys="_imgCoin_7nygw_186",e={container_box_prize:rs,fon:_s,box_prize:ms,imgEnotFace:gs,loot_box:xs,imgBox:ls,imgBumble:ps,box_info_prize:bs,possible_prize:ds,title_prize1:us,title_prize:zs,box_getting_prize:fs,getting_prize:js,imgPrize:ws,imgPrize1:Ns,icon_prize:Bs,cost_window:As,cost_text:hs,imgCoin:ys},Cs="_btn_1f7fz_1",ks="_btn2_1f7fz_20",R={btn:Cs,btn2:ks};function Ps({...r}){return s.jsx("button",{...r,className:R.btn,children:"Получить"})}const vs="/assets/EnotFaceBackground-tDiY4JaM.png",Ds="/assets/bumbleLight-_3kQzhIG.png";function Fs({...r}){return s.jsx("button",{...r,className:R.btn2,children:"Забрать"})}function P({box:r,lootBox:n,imgBox:t,setTypeBox:_}){const{tg:x,tg_id:o}=O(),[c,m]=u.useState([]),[l,N]=u.useState(),j=w(i=>{var a;return(a=i.dataUser.getUser)==null?void 0:a.coin}),{mutate:g}=S({mutationFn:i=>K(i.name_box,i.tg_id),onSuccess:i=>{x.HapticFeedback.impactOccurred("light"),m(i),f.invalidateQueries({queryKey:["userData"]}),f.invalidateQueries({queryKey:["boxesData"]}),y(2)}},f),d=S({mutationFn:i=>V(i.prizes,i.tg_id),onSuccess:i=>{N(i),f.invalidateQueries({queryKey:["userData"]}),f.invalidateQueries({queryKey:["boosterData"]})},onError:i=>{console.log(i)}},f),[p,y]=u.useState(1),C=()=>{(n==null?void 0:n.name)==="Bronze"&&g({name_box:"Bronze",tg_id:o}),(n==null?void 0:n.name)=="Silver"&&g({name_box:"Silver",tg_id:o}),(n==null?void 0:n.name)=="Gold"&&g({name_box:"Gold",tg_id:o})},k=()=>{d.mutate({tg_id:o,prizes:c}),x.HapticFeedback.impactOccurred("light"),_(0),m([])};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:e.fon,children:[s.jsxs("div",{className:e.cost_window,children:[s.jsx("img",{src:F,className:e.imgCoin}),j&&s.jsx("p",{className:e.cost_text,children:E(j)})]}),s.jsx("img",{src:vs,className:e.imgEnotFace})]}),p==1&&s.jsxs("div",{className:e.box_prize,children:[s.jsxs("div",{className:e.loot_box,children:[s.jsx("img",{src:Ds,className:e.imgBumble}),s.jsx("img",{className:e.imgBox,src:r})]}),s.jsxs("div",{className:e.box_info_prize,children:[s.jsx("p",{className:e.title_prize1,children:"Ты можешь получить:"}),s.jsx("div",{className:e.possible_prize,children:t.map((i,a)=>s.jsx("img",{className:e.icon_prize,src:i},a))}),s.jsx(Ps,{onClick:C})]})]}),p==2&&s.jsxs("div",{className:e.box_getting_prize,children:[l?s.jsx("p",{className:e.title_prize,children:l.Success}):s.jsx("p",{className:e.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:e.getting_prize,children:c.map((i,a)=>{if(i.prize_name==="Coin Boosts")return s.jsx("img",{className:e.imgPrize,src:B},a);if(i.prize_name==="Energy Boosts")return s.jsx("img",{className:e.imgPrize,src:A},a);if(i.prize_name==="Dimonds")return s.jsx("img",{className:e.imgPrize,src:h},a);if(i.prize_name==="Bot Boosts")return s.jsx("img",{className:e.imgPrize,src:D},a)})}),!l&&s.jsx(Fs,{onClick:k,title:"Забрать"})]})]})}const Es="/assets/iconCoinDisaebl-L25US0Zb.png",Ss="_box_4wrg5_1",Us="_imgBox1_4wrg5_13",Ws="_cost_box_4wrg5_24",Is="_imgCoin_4wrg5_33",Os="_cost_text_4wrg5_41",Rs="_box_disabled_4wrg5_52",qs="_opas_4wrg5_65",Gs="_imgFonBox_4wrg5_69",z={box:Ss,imgBox1:Us,cost_box:Ws,imgCoin:Is,cost_text:Os,box_disabled:Rs,opas:qs,imgFonBox:Gs},Hs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAAcCAYAAAAz+aIrAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAOrSURBVHgB7VjbbtswDKWc25KmWbItw4AV2P/3J/oTfS8G+GFFBjRIs7ROMmvnUJJDe1mzS1+2mQBLijqk5GOZdurkJ8R7P4Y5jzqAdhmGOgtrjGuy24n0ehVG7Q7BHoImP4kz4x/5Fvvk9qPdQx8fIMPhcOmc+3Ii7+nCIGW63W7f9fv9HqyDLaP1sBkta8Av4Wfwy1iTMY9Yba3tlhvdSowzN4u2NL4zVpCD9YTr2bwKgzDiCauYsnldMW6JpcXtkluQtJRfIQek8Ha+hw7NZjax4C7F1uu14sfjsS6KsbPjdBGMM5bmI6ZaL9VJuQmf1rD10jhiJKSuj+ahmsRldC7Lst5oNOoXRdEfDAadSBrolY8gaS8N6TYDi8WCj868KKQjUmz3+/367OyMBdxqtYKZQFcymUykLEu1h7iOPcbOWMUlDIbqU72feOdWtRsUcMlXujRm63IvrBnIFMRLF28q9+jDXsa6z+BXN0MfLRAjm81m0Ol0RrxODD8g91PzUattDACelHf0NxspRiMh2N/d3bnZbOaXy2U2nU45VjximsY/ESMBz7p3VV3GQ0qKzWI8jNJcwKlNa4pZq1Y3YU7N2TEF1+jN3h1IGpIkEEa2F4BUx7hriMFJkVdk9/7+/uH8/PwxTeH0OJwo+iXtfD73t7fVtfO0uWBx5ObELxwwZj7EsSUX8sUzZ7EgRusBs5dU+1BvIVZQV23AH3w7d8DOtHa6BpKR6trayOfxYqt4gV49BQ8PIOhrjZxIDNnbkJg8T+FcLi4uJIzrfp5fpJjP81wXzmNisGE+WFEM8+kXxRw+Y4X2JWyyyrf1DuvphVTNGH3DHXCsWcQ8ccSzNjIk1qnqERvWrZ4a1uRp+Yq32AscDLL6uWLl5uaGwbdg7RW0T72+vlZlc442+t74h/kjft/WsmPimvGUZ+r/sI7FmHGvMVfbd2Ncu54YH0DfQOf0K3IweAmdRUCHenl5WWmKWb26uuo2YwkbbRbjtNkTcx3rW9wRPzuyr+9qNPfTjB/TiCVJr6HaxV3sNWd8pGwz+l3hG4N9T/5cjn3w/cp8TU7tK80nYiBf+OHFvsNes5NnkGcihuL/cL4mp/Zl5h9j7W5mFtpLKxS+qfSLneTYT/hWAg96iqqT84yPw18tkQflIvWbVuqiBCVyTv3s/99EH63Ub/gKawmS8EqX2IPT/2Da01MXPTAZGlDbc+rCQ6KPVfrh2RJ0EH1TtW/vVlpppZVWWmnlX5Zv2mCiSrRsb+cAAAAASUVORK5CYII=",Qs=({onClick:r,imgBox:n,lootBox:t})=>{const _=w(o=>{var c;return(c=o.dataUser.getUser)==null?void 0:c.coin})||0,x=(o,c)=>{if(c.price)return o>+c.price};return s.jsx(s.Fragment,{children:t&&s.jsxs("div",{onClick:r,className:`${x(_,t)?z.box:z.box_disabled}  `,children:[s.jsx("img",{className:z.imgBox1,src:n}),s.jsxs("div",{className:z.cost_box,children:[s.jsx("img",{className:z.imgFonBox,src:Hs}),s.jsx("img",{src:`${x(_,t)?F:Es}`,className:z.imgCoin}),(t==null?void 0:t.price)&&s.jsx("p",{className:z.cost_text,children:E(t.price)})]})]})})},v=u.memo(Qs);function Xs(){const{tg:r,tg_id:n}=O(),[t,_]=u.useState(0),x=M(),[o,c]=u.useState([]),m=w(i=>{var a;return(a=i.dataUser.getUser)==null?void 0:a.coin}),{data:l}=Y({queryKey:["boxesData"],queryFn:()=>L(n)},f);u.useEffect(()=>{l&&(x(q(l[0])),x(G(l[1])),x(H(l[2])))},[l]);const[N,j]=u.useState(""),g=w(i=>i.lootBox1.box),d=w(i=>i.lootBox2.box),p=w(i=>i.lootBox3.box),y=()=>{m&&(g!=null&&g.price)&&m>=g.price&&(r.HapticFeedback.impactOccurred("light"),_(1),j(U),c([B,A,h]))},C=()=>{m&&(d!=null&&d.price)&&m>=d.price&&(r.HapticFeedback.impactOccurred("light"),_(2),j(W),c([B,A,h,D]))},k=()=>{m&&(p!=null&&p.price)&&m>=p.price&&(r.HapticFeedback.impactOccurred("light"),_(3),j(I),c([B,A,h,D,cs]))};return s.jsxs(Q,{children:[s.jsx(T,{}),s.jsxs("div",{className:b.root,children:[t==0&&s.jsxs("div",{className:b.fon,children:[s.jsxs("div",{className:b.cost_window,children:[s.jsx("img",{src:F,className:b.imgCoin}),m&&s.jsx("p",{className:b.cost_text,children:E(m)})]}),s.jsx("h1",{className:b.slogan,children:"Твоя награда уже внутри!"}),s.jsx("p",{className:b.text_slogan,children:"Открой сундук и получи свои сокровища!"}),s.jsx("img",{src:as,className:b.imgEnotBack})]}),t==1&&s.jsx(P,{box:N,lootBox:g,imgBox:o,setTypeBox:_}),t==2&&s.jsx(P,{box:N,lootBox:d,imgBox:o,setTypeBox:_}),t==3&&s.jsx(P,{box:N,lootBox:p,imgBox:o,setTypeBox:_}),s.jsxs("div",{className:b.container,children:[s.jsx(v,{imgBox:U,lootBox:g,onClick:y}),s.jsx(v,{imgBox:W,lootBox:d,onClick:C}),s.jsx(v,{imgBox:I,lootBox:p,onClick:k})]})]})]})}export{Xs as default};
