import{j as s,u as I,r as h,h as G,i as L,k as H,l as T,D as O}from"./index-CmWV6iY9.js";import{i as P}from"./imgCoin-C6EPuP39.js";import{H as V}from"./Header-C_u7GVSR.js";import{u as F}from"./useMutation-BILX5DGV.js";import{h as J,q as j,i as Y,u as Z,j as W}from"./gueryClient-DeKJ6wb-.js";import{u,f as q,a as M}from"./formatNumber-DvWf_IGP.js";import{M as X}from"./Modal-B-j6ftNI.js";import{i as $}from"./imgEnotNoFriends-BFEuTXA9.js";const ss="_root_1ykh0_1",is="_cost_window_1ykh0_14",os="_imgCoin_1ykh0_30",es="_container_1ykh0_37",ts="_fon_1ykh0_47",ns="_box_1ykh0_55",cs="_imgEnotBack_1ykh0_60",as="_slogan_1ykh0_72",rs="_text_slogan_1ykh0_92",_s="_cost_text_1ykh0_118",A={root:ss,cost_window:is,imgCoin:os,container:es,fon:ts,box:ns,imgEnotBack:cs,slogan:as,text_slogan:rs,cost_text:_s},C="/assets/coinPrize-CVnttyvR.png",E="/assets/energyPrize-cn7Ff2oR.png",k="/assets/diamondsPrize-ruuOLLUW.png",D="/assets/botPrize-CD0cXvET.png",xs="/assets/skinPrize-Csi9GH01.png",v="/assets/box1-D3XQbKnU.png",K="/assets/box2-_a3OpZPI.png",S="/assets/box3-BQ05YlqY.png",ms="/assets/imgFon-dCH78UyA.png",gs="_container_box_prize_1qx35_1",ls="_fon_1qx35_11",ds="_box_prize_1qx35_19",ps="_imgEnotFace_1qx35_27",As="_loot_box_1qx35_39",bs="_imgBox_1qx35_47",hs="_imgBumble_1qx35_59",Ns="_box_info_prize_1qx35_72",js="_possible_prize_1qx35_82",zs="_title_prize1_1qx35_98",us="_title_prize_1qx35_98",Bs="_box_getting_prize_1qx35_131",Cs="_getting_prize_1qx35_141",Es="_imgPrize_1qx35_150",ks="_imgPrize1_1qx35_158",ws="_icon_prize_1qx35_166",Us="_cost_window_1qx35_177",fs="_cost_text_1qx35_193",ys="_imgCoin_1qx35_208",o={container_box_prize:gs,fon:ls,box_prize:ds,imgEnotFace:ps,loot_box:As,imgBox:bs,imgBumble:hs,box_info_prize:Ns,possible_prize:js,title_prize1:zs,title_prize:us,box_getting_prize:Bs,getting_prize:Cs,imgPrize:Es,imgPrize1:ks,icon_prize:ws,cost_window:Us,cost_text:fs,imgCoin:ys},Qs="_btn_1f7fz_1",Ds="_btn2_1f7fz_20",R={btn:Qs,btn2:Ds};function Ps({...c}){return s.jsx("button",{...c,className:R.btn,children:"Получить"})}const qs="/assets/EnotFaceBackground-tDiY4JaM.png",Fs="data:image/png;base64,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";function vs({...c}){return s.jsx("button",{...c,className:R.btn2,children:"Забрать"})}function y({box:c,lootBox:e,imgBox:n,setTypeBox:x}){const{tg:l,tg_id:a}=I(),[r,m]=h.useState([]),[d,B]=h.useState(),z=u(i=>{var _;return(_=i.dataUser.getUser)==null?void 0:_.coin}),{mutate:g}=F({mutationFn:i=>J(i.name_box,i.tg_id),onSuccess:i=>{l.HapticFeedback.impactOccurred("light"),m(i),j.invalidateQueries({queryKey:["userData"]}),j.invalidateQueries({queryKey:["boxesData"]}),w(2)}},j),b=F({mutationFn:i=>Y(i.prizes,i.tg_id),onSuccess:i=>{B(i),j.invalidateQueries({queryKey:["userData"]}),j.invalidateQueries({queryKey:["boosterData"]})},onError:i=>{console.log(i)}},j),[p,w]=h.useState(1),U=()=>{(e==null?void 0:e.name)==="Bronze"&&g({name_box:"Bronze",tg_id:a}),(e==null?void 0:e.name)=="Silver"&&g({name_box:"Silver",tg_id:a}),(e==null?void 0:e.name)=="Gold"&&g({name_box:"Gold",tg_id:a})},f=()=>{b.mutate({tg_id:a,prizes:r}),l.HapticFeedback.impactOccurred("light"),x(0),m([])};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:o.fon,children:[s.jsxs("div",{className:o.cost_window,children:[s.jsx("img",{src:P,className:o.imgCoin}),z&&s.jsx("p",{className:o.cost_text,children:q(z)})]}),s.jsx("img",{src:qs,className:o.imgEnotFace})]}),p==1&&s.jsxs("div",{className:o.box_prize,children:[s.jsxs("div",{className:o.loot_box,children:[s.jsx("img",{src:Fs,className:o.imgBumble}),s.jsx("img",{className:o.imgBox,src:c})]}),s.jsxs("div",{className:o.box_info_prize,children:[s.jsx("p",{className:o.title_prize1,children:"Ты можешь получить:"}),s.jsx("div",{className:o.possible_prize,children:n.map((i,_)=>s.jsx("img",{className:o.icon_prize,src:i},_))}),s.jsx(Ps,{onClick:U})]})]}),p==2&&s.jsxs("div",{className:o.box_getting_prize,children:[d?s.jsx("p",{className:o.title_prize,children:d.Success}):s.jsx("p",{className:o.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:o.getting_prize,children:r.map((i,_)=>{if(i.prize_name==="Coin Boosts")return s.jsx("img",{className:o.imgPrize,src:C},_);if(i.prize_name==="Energy Boosts")return s.jsx("img",{className:o.imgPrize,src:E},_);if(i.prize_name==="Dimonds")return s.jsx("img",{className:o.imgPrize,src:k},_);if(i.prize_name==="Bot Boosts")return s.jsx("img",{className:o.imgPrize,src:D},_)})}),!d&&s.jsx(vs,{onClick:f,title:"Забрать"})]})]})}const Ks="/assets/iconCoinDisaebl-DrMJuuVR.png",Ss="_box_4wrg5_1",Is="_imgBox1_4wrg5_13",Rs="_cost_box_4wrg5_24",Gs="_imgCoin_4wrg5_33",Ls="_cost_text_4wrg5_41",Hs="_box_disabled_4wrg5_52",Ts="_opas_4wrg5_65",Os="_imgFonBox_4wrg5_69",N={box:Ss,imgBox1:Is,cost_box:Rs,imgCoin:Gs,cost_text:Ls,box_disabled:Hs,opas:Ts,imgFonBox:Os},Vs="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAAAcCAMAAAAEJ1IZAAAAAXNSR0IArs4c6QAAAAxQTFRFR3BM8/P2+Pj6/v7/or40bgAAAAR0Uk5TAAgSLPesKxIAAABqSURBVHja7cxJCsNADAXRX6X73zkkxondi0APK9NPWklQ+cLqJWlZY8wVx61Xvd0yloOquGQUsRe3EKrCb5s51vZ13jUfqow7QyiQqQ5JlMxBk0hmaQJkFrKkEwhkd/51sgBJWNLZtid5AZvgA+mISFceAAAAAElFTkSuQmCC",Js=({onClick:c,imgBox:e,lootBox:n})=>{const x=u(a=>{var r;return(r=a.dataUser.getUser)==null?void 0:r.coin})||0,l=(a,r)=>{if(r.price)return a>+r.price};return s.jsx(s.Fragment,{children:n&&s.jsxs("div",{onClick:c,className:`${l(x,n)?N.box:N.box_disabled}  `,children:[s.jsx("img",{className:N.imgBox1,src:e}),s.jsxs("div",{className:N.cost_box,children:[s.jsx("img",{className:N.imgFonBox,src:Vs}),s.jsx("img",{src:`${l(x,n)?P:Ks}`,className:N.imgCoin}),(n==null?void 0:n.price)&&s.jsx("p",{className:N.cost_text,children:q(n.price)})]})]})})},Q=h.memo(Js),Ys="_modal_content_hx54e_1",Zs="_box_error_hx54e_11",Ws="_imgEnot_hx54e_23",Ms="_error_text_hx54e_29",Xs="_btn1_hx54e_34",$s="_box_conditions_hx54e_52",si="_title_conditions_hx54e_56",ii="_list_conditions_hx54e_63",oi="_box_condition_hx54e_52",ei="_dot_hx54e_77",ti="_name_condition_hx54e_84",ni="_btn2_hx54e_92",t={modal_content:Ys,box_error:Zs,imgEnot:Ws,error_text:Ms,btn1:Xs,box_conditions:$s,title_conditions:si,list_conditions:ii,box_condition:oi,dot:ei,name_condition:ti,btn2:ni};function ci(){const c=G(),e=()=>{c("/friends")};return s.jsxs("div",{className:t.modal_content,children:[s.jsxs("div",{className:t.box_error,children:[s.jsx("img",{className:t.imgEnot,src:$}),s.jsxs("div",{children:[" ","ОЙ!",s.jsx("p",{className:t.error_text,children:"Кажется твой друг не достиг 2 уровня!"})]})]}),s.jsx("button",{className:t.btn1,children:"Напомнить другу"}),s.jsxs("div",{className:t.box_conditions,children:[s.jsx("p",{className:t.title_conditions,children:"Чтобы получить награды, необходимо выполнить условия:"}),s.jsxs("div",{className:t.list_conditions,children:[s.jsxs("div",{className:t.box_condition,children:[s.jsx("div",{className:t.dot})," ",s.jsx("p",{className:t.name_condition,children:"Твой друг достиг 2 уровня"})]}),s.jsxs("div",{className:t.box_condition,children:[s.jsx("div",{className:t.dot})," ",s.jsx("p",{className:t.name_condition,children:"Ты выполнил 4 задания"})]})]})]}),s.jsx("button",{onClick:e,className:t.btn2,children:"Проверить задание"})]})}function pi(){const{tg:c,tg_id:e}=I(),[n,x]=h.useState(0),l=M(),[a,r]=h.useState([]),m=u(i=>{var _;return(_=i.dataUser.getUser)==null?void 0:_.coin}),{data:d}=Z({queryKey:["boxesData"],queryFn:()=>W(e)},j);h.useEffect(()=>{d&&(l(L(d[0])),l(H(d[1])),l(T(d[2])))},[d]);const[B,z]=h.useState(""),g=u(i=>i.lootBox1.box),b=u(i=>i.lootBox2.box),p=u(i=>i.lootBox3.box),w=()=>{m&&(g!=null&&g.price)&&m>=g.price&&(c.HapticFeedback.impactOccurred("light"),x(1),z(v),r([C,E,k]))},U=()=>{m&&(b!=null&&b.price)&&m>=b.price&&(c.HapticFeedback.impactOccurred("light"),x(2),z(K),r([C,E,k,D]))},f=()=>{m&&(p!=null&&p.price)&&m>=p.price&&(c.HapticFeedback.impactOccurred("light"),x(3),z(S),r([C,E,k,D,xs]))};return s.jsxs(O,{children:[s.jsx(V,{}),s.jsxs("div",{className:A.root,children:[n==0&&s.jsxs("div",{className:A.fon,children:[s.jsxs("div",{className:A.cost_window,children:[s.jsx("img",{src:P,className:A.imgCoin}),m&&s.jsx("p",{className:A.cost_text,children:q(m)})]}),s.jsx("h1",{className:A.slogan,children:"Твоя награда уже внутри!"}),s.jsx("p",{className:A.text_slogan,children:"Открой сундук и получи свои сокровища!"}),s.jsx("img",{src:ms,className:A.imgEnotBack})]}),n==1&&s.jsx(y,{box:B,lootBox:g,imgBox:a,setTypeBox:x}),n==2&&s.jsx(y,{box:B,lootBox:b,imgBox:a,setTypeBox:x}),n==3&&s.jsx(y,{box:B,lootBox:p,imgBox:a,setTypeBox:x}),s.jsxs("div",{className:A.container,children:[s.jsx(Q,{imgBox:v,lootBox:g,onClick:w}),s.jsx(Q,{imgBox:K,lootBox:b,onClick:U}),s.jsx(Q,{imgBox:S,lootBox:p,onClick:f})]})]}),s.jsx(X,{isOpen:!1,children:s.jsx(ci,{})})]})}export{pi as default};
