import{j as s,u as F,r as x,m as K,n as Q,o as G,D as A}from"./index-B7WMYub0.js";import{i as C}from"./imgCoin-DwLBqyid.js";import{H as L}from"./Header-CuzpYQT5.js";import{u as j,b as E,a as T}from"./useMutation-BA_JD4vP.js";import{h as U,q as p,i as w,u as H,j as I}from"./gueryClient-BN4mOOiT.js";const M="_root_b5q9f_1",O="_container_b5q9f_14",X="_box_b5q9f_23",Y="_imgBox1_b5q9f_36",Z="_imgEnotBack_b5q9f_49",J="_slogan_b5q9f_60",R="_cost_box_b5q9f_69",V="_imgCoin_b5q9f_81",W="_cost_text_b5q9f_89",ss="_show_b5q9f_1",i={root:M,container:O,box:X,imgBox1:Y,imgEnotBack:Z,slogan:J,cost_box:R,imgCoin:V,cost_text:W,show:ss},N="/assets/coinPrize-CayVTFUQ.png",f="/assets/energyPrize-CL1jtWuk.png",h="/assets/diamondsPrize-B0oiZMmn.png",k="/assets/botPrize-CLn2oDfX.png",es="/assets/skinPrize-Csi9GH01.png",q="/assets/box1-D3XQbKnU.png",D="/assets/box2-_a3OpZPI.png",S="/assets/box3-BQ05YlqY.png",is="/assets/EnotBackground-DEyn0Py-.png",ns="_container_box_prize_1naer_1",ts="_box_prize_1naer_11",os="_imgEnotFace_1naer_17",cs="_loot_box_1naer_28",as="_imgBox_1naer_36",rs="_imgBumble_1naer_43",_s="_box_info_prize_1naer_51",ms="_possible_prize_1naer_61",gs="_title_prize_1naer_76",xs="_box_getting_prize_1naer_89",ls="_getting_prize_1naer_95",ps="_imgPrize_1naer_104",bs="_imgPrize1_1naer_108",zs="_icon_prize_1naer_112",n={container_box_prize:ns,box_prize:ts,imgEnotFace:os,loot_box:cs,imgBox:as,imgBumble:rs,box_info_prize:_s,possible_prize:ms,title_prize:gs,box_getting_prize:xs,getting_prize:ls,imgPrize:ps,imgPrize1:bs,icon_prize:zs},us="_btn_1sx9u_1",ds="_btn2_1sx9u_16",$={btn:us,btn2:ds};function js({...l}){return s.jsx("button",{...l,className:$.btn,children:"Получить"})}const Ns="/assets/EnotFaceBackground-CJx_fDe-.png",fs="/assets/bumbleLight-_3kQzhIG.png";function hs({...l}){return s.jsx("button",{...l,className:$.btn2,children:"Забрать"})}function v({box:l,lootBox1:t,imgBox:z}){const{tg_id:m}=F(),[g,b]=x.useState([]),[a,u]=x.useState(),d=j(e=>{var _;return(_=e.dataUser.getUser)==null?void 0:_.coin}),{mutate:o}=E({mutationFn:e=>U(e.name_box,e.tg_id),onSuccess:e=>{b(e),p.invalidateQueries({queryKey:["userData"]}),p.invalidateQueries({queryKey:["boxesData"]}),B(2)}},p),r=E({mutationFn:e=>w(e.prizes,e.tg_id),onSuccess:e=>{u(e),p.invalidateQueries({queryKey:["userData"]}),p.invalidateQueries({queryKey:["boosterData"]})},onError:e=>{console.log(e)}},p),[c,B]=x.useState(1),P=()=>{console.log(d,t==null?void 0:t.price),(t==null?void 0:t.name)==="Bronze"&&o({name_box:"Bronze",tg_id:m}),(t==null?void 0:t.name)=="Silver"&&o({name_box:"Silver",tg_id:m}),(t==null?void 0:t.name)=="Gold"&&o({name_box:"Gold",tg_id:m})},y=()=>{r.mutate({tg_id:m,prizes:g}),b([])};return x.useEffect(()=>{console.log(g)},[g]),s.jsxs("div",{className:n.container_box_prize,children:[s.jsx("img",{src:Ns,className:n.imgEnotFace}),c==1&&s.jsxs("div",{className:n.box_prize,children:[s.jsxs("div",{className:n.loot_box,children:[s.jsx("img",{src:fs,className:n.imgBumble}),s.jsx("img",{className:n.imgBox,src:l})]}),s.jsxs("div",{className:n.box_info_prize,children:[s.jsx("p",{className:n.title_prize,children:"Ты можешь получить:"}),s.jsx("div",{className:n.possible_prize,children:z.map((e,_)=>s.jsx("img",{className:n.icon_prize,src:e},_))}),s.jsx(js,{onClick:P})]})]}),c==2&&s.jsxs("div",{className:n.box_getting_prize,children:[a?s.jsx("p",{className:n.title_prize,children:a.Success}):s.jsx("p",{className:n.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:n.getting_prize,children:g.map((e,_)=>{if(e.prize_name==="Coin Boosts")return s.jsx("img",{className:n.imgPrize,src:N},_);if(e.prize_name==="Energy Boosts")return s.jsx("img",{className:n.imgPrize,src:f},_);if(e.prize_name==="Dimonds")return s.jsx("img",{className:n.imgPrize,src:h},_);if(e.prize_name==="Bot Boosts")return s.jsx("img",{className:n.imgPrize,src:k},_)})}),!a&&s.jsx(hs,{onClick:y,title:"Забрать"})]})]})}function ks(){const{tg_id:l}=F(),[t,z]=x.useState(0),m=T(),[g,b]=x.useState([]),{data:a}=H({queryKey:["boxesData"],queryFn:()=>I(l)},p);x.useEffect(()=>{a&&(m(K(a[0])),m(Q(a[1])),m(G(a[2])))},[a]);const[u,d]=x.useState(""),o=j(e=>e.lootBox1.box),r=j(e=>e.lootBox2.box),c=j(e=>e.lootBox3.box),B=()=>{z(1),d(q),b([N,f,h])},P=()=>{z(2),d(D),b([N,f,h,k])},y=()=>{z(3),d(S),b([N,f,h,k,es])};return s.jsxs(A,{children:[s.jsx(L,{}),s.jsxs("div",{className:i.root,children:[t==0&&s.jsxs("div",{children:[s.jsx("h1",{className:i.slogan,children:"Текст призыв нажать на сундук"}),s.jsx("img",{src:is,className:i.imgEnotBack})]}),t==1&&s.jsx(v,{box:u,lootBox1:o,imgBox:g}),t==2&&s.jsx(v,{box:u,lootBox1:r,imgBox:g}),t==3&&s.jsx(v,{box:u,lootBox1:c,imgBox:g}),s.jsxs("div",{className:i.container,children:[s.jsxs("div",{onClick:B,className:i.box,children:[s.jsx("img",{className:i.imgBox1,src:q}),s.jsxs("div",{className:i.cost_box,children:[s.jsx("img",{src:C,className:i.imgCoin}),(o==null?void 0:o.price)&&s.jsx("p",{className:i.cost_text,children:`${(o==null?void 0:o.price)/1e3}K`})]})]}),s.jsxs("div",{onClick:P,className:i.box,children:[s.jsx("img",{className:i.imgBox1,src:D}),s.jsxs("div",{className:i.cost_box,children:[s.jsx("img",{src:C,className:i.imgCoin}),(r==null?void 0:r.price)&&s.jsx("p",{className:i.cost_text,children:`${(r==null?void 0:r.price)/1e3}K`})]})]}),s.jsxs("div",{onClick:y,className:i.box,children:[s.jsx("img",{className:i.imgBox1,src:S}),s.jsxs("div",{className:i.cost_box,children:[s.jsx("img",{src:C,className:i.imgCoin}),(c==null?void 0:c.price)&&s.jsx("p",{className:i.cost_text,children:`${(c==null?void 0:c.price)/1e3}K`})]})]})]})]})]})}export{ks as default};
