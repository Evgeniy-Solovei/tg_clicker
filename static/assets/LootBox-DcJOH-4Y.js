import{j as s,u as F,r as t,m as Q,n as $,o as G}from"./index-vEICp9gQ.js";import{D as K}from"./Dialog-BREOUhPi.js";import{H as L}from"./Header-BjOZ7Qz1.js";import{b as E,a as A,u as k}from"./useMutation-BB9RYCBY.js";import{h as T,q as m,i as w,u as H,j as I}from"./gueryClient-DCetCupW.js";const M="_root_kosd9_1",O="_container_kosd9_14",U="_box_kosd9_23",X="_imgBox1_kosd9_35",Y="_imgEnotBack_kosd9_46",Z="_slogan_kosd9_57",J="_show_kosd9_1",c={root:M,container:O,box:U,imgBox1:X,imgEnotBack:Y,slogan:Z,show:J},z="/assets/coinPrize-CayVTFUQ.png",d="/assets/energyPrize-CL1jtWuk.png",B="/assets/diamondsPrize-B0oiZMmn.png",P="/assets/botPrize-CLn2oDfX.png",R="/assets/skinPrize-Csi9GH01.png",v="/assets/box1-D3XQbKnU.png",C="/assets/box2-_a3OpZPI.png",D="/assets/box3-BQ05YlqY.png",V="/assets/EnotBackground-DEyn0Py-.png",W="_container_box_prize_1naer_1",ss="_box_prize_1naer_11",es="_imgEnotFace_1naer_17",os="_loot_box_1naer_28",is="_imgBox_1naer_36",ns="_imgBumble_1naer_43",ts="_box_info_prize_1naer_51",rs="_possible_prize_1naer_61",as="_title_prize_1naer_76",cs="_box_getting_prize_1naer_89",_s="_getting_prize_1naer_95",ms="_imgPrize_1naer_104",xs="_imgPrize1_1naer_108",ls="_icon_prize_1naer_112",o={container_box_prize:W,box_prize:ss,imgEnotFace:es,loot_box:os,imgBox:is,imgBumble:ns,box_info_prize:ts,possible_prize:rs,title_prize:as,box_getting_prize:cs,getting_prize:_s,imgPrize:ms,imgPrize1:xs,icon_prize:ls},gs="_btn_1sx9u_1",ps="_btn2_1sx9u_16",q={btn:gs,btn2:ps};function bs({...n}){return s.jsx("button",{...n,className:q.btn,children:"Получить"})}const us="/assets/EnotFaceBackground-CJx_fDe-.png",zs="/assets/bumbleLight-_3kQzhIG.png";function ds({...n}){return s.jsx("button",{...n,className:q.btn2,children:"Забрать"})}function y({box:n,lootBox1:i,imgBox:l}){const{tg_id:g}=F(),[r,a]=t.useState([]),[_,p]=t.useState(),{mutate:b}=E({mutationFn:e=>T(e.name_box),onSuccess:e=>{a(e),m.invalidateQueries({queryKey:["userData"]}),m.invalidateQueries({queryKey:["boxesData"]})}},m),j=E({mutationFn:e=>w(e.prizes,e.tg_id),onSuccess:e=>{p(e),m.invalidateQueries({queryKey:["userData"]}),m.invalidateQueries({queryKey:["boosterData"]})},onError:e=>{console.log(e)}},m),[u,h]=t.useState(1),N=()=>{(i==null?void 0:i.name)==="Bronze"&&b({name_box:"Bronze"}),(i==null?void 0:i.name)=="Silver"&&b({name_box:"Silver"}),(i==null?void 0:i.name)=="Gold"&&b({name_box:"Gold"}),h(2)},f=()=>{j.mutate({tg_id:g,prizes:r}),a([])};return t.useEffect(()=>{console.log(r)},[r]),s.jsxs("div",{className:o.container_box_prize,children:[s.jsx("img",{src:us,className:o.imgEnotFace}),u==1&&s.jsxs("div",{className:o.box_prize,children:[s.jsxs("div",{className:o.loot_box,children:[s.jsx("img",{src:zs,className:o.imgBumble}),s.jsx("img",{className:o.imgBox,src:n})]}),s.jsxs("div",{className:o.box_info_prize,children:[s.jsx("p",{className:o.title_prize,children:"Ты можешь получить:"}),s.jsx("div",{className:o.possible_prize,children:l.map((e,x)=>s.jsx("img",{className:o.icon_prize,src:e},x))}),s.jsx(bs,{onClick:N})]})]}),u==2&&s.jsxs("div",{className:o.box_getting_prize,children:[_?s.jsx("p",{className:o.title_prize,children:_.Success}):s.jsx("p",{className:o.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:o.getting_prize,children:r.map((e,x)=>{if(e.prize_name==="Coin Boosts")return s.jsx("img",{className:o.imgPrize,src:z},x);if(e.prize_name==="Energy Boosts")return s.jsx("img",{className:o.imgPrize,src:d},x);if(e.prize_name==="Dimonds")return s.jsx("img",{className:o.imgPrize,src:B},x);if(e.prize_name==="Bot Boosts")return s.jsx("img",{className:o.imgPrize,src:P},x)})}),!_&&s.jsx(ds,{onClick:f,title:"Забрать"})]})]})}const Bs="_box_mth5q_1",js="_imgBox1_mth5q_13",S={box:Bs,imgBox1:js},hs=({onClick:n,imgBox:i})=>s.jsx("div",{onClick:n,className:S.box,children:s.jsx("img",{className:S.imgBox1,src:i})}),Ns=t.memo(hs);function vs(){const[n,i]=t.useState(0),l=A(),[g,r]=t.useState([]),{data:a}=H({queryKey:["boxesData"],queryFn:()=>I()},m);t.useEffect(()=>{a&&(l(Q(a[0])),l($(a[1])),l(G(a[2])))},[a]);const[_,p]=t.useState(""),b=k(e=>e.lootBox1.box),j=k(e=>e.lootBox2.box),u=k(e=>e.lootBox3.box),h=()=>{i(1),p(v),r([z,d,B])},N=()=>{i(2),p(C),r([z,d,B,P])},f=()=>{i(3),p(D),r([z,d,B,P,R])};return s.jsxs(K,{children:[s.jsx(L,{}),s.jsxs("div",{className:c.root,children:[n==0&&s.jsxs("div",{children:[s.jsx("h1",{className:c.slogan,children:"Текст призыв нажать на сундук"}),s.jsx("img",{src:V,className:c.imgEnotBack})]}),n==1&&s.jsx(y,{box:_,lootBox1:b,imgBox:g}),n==2&&s.jsx(y,{box:_,lootBox1:j,imgBox:g}),n==3&&s.jsx(y,{box:_,lootBox1:u,imgBox:g}),s.jsxs("div",{className:c.container,children:[s.jsx(Ns,{imgBox:v,onClick:h}),s.jsx("div",{onClick:N,className:c.box,children:s.jsx("img",{className:c.imgBox1,src:C})}),s.jsx("div",{onClick:f,className:c.box,children:s.jsx("img",{className:c.imgBox1,src:D})})]})]})]})}export{vs as default};
