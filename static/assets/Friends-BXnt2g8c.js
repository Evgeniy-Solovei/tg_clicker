import{j as e,u as j,r as l,D as F}from"./index-BbG5_Ajk.js";import{H as N}from"./Header-D0rUSq1l.js";import{i as C}from"./avatarFrend-CDr8Usu-.js";import{i as y,Q as k,B as R,Y as h}from"./ReactToastify-B4iGV4Il.js";import{u}from"./useMutation-CrIvx8o_.js";import{h as v,k as L,q as a,u as b,l as z,m as E}from"./gueryClient-DSGroVhU.js";import{M as w}from"./Modal-C86nEtyq.js";import{i as Q}from"./imgEnotNoFriends-BFEuTXA9.js";const S="_container_3b2m7_1",W="_main_box_3b2m7_10",U="_imgBoxFon_3b2m7_16",O="_text_slogan_3b2m7_25",T="_your_referrals_3b2m7_45",V="_your_referrals_title_3b2m7_54",D="_btn_return_3b2m7_68",K="_imgBtnReturn_3b2m7_78",G="_box_our_friends_3b2m7_83",I="_box_no_friends_3b2m7_91",M="_text_no_friends_3b2m7_99",X="_imgEnotNoFriend_3b2m7_111",H="_btn_ref_3b2m7_121",P="_iconBtnRef_3b2m7_155",q="_btn_copy_3b2m7_161",J="_iconBtnCopy_3b2m7_179",n={container:S,main_box:W,imgBoxFon:U,text_slogan:O,your_referrals:T,your_referrals_title:V,btn_return:D,imgBtnReturn:K,box_our_friends:G,box_no_friends:I,text_no_friends:M,imgEnotNoFriend:X,btn_ref:H,iconBtnRef:P,btn_copy:q,iconBtnCopy:J},Y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAAXNSR0IArs4c6QAAACpQTFRFR3BM////////////////////////////////////////////////////iwaSzAAAAA10Uk5TABAfOldvf4+fr7/b75OUzK0AAAEjSURBVHjardXRisQgEETRinY02tb/f+3CItkpxkwiLsx5vjQSjeJis1y8kc1rtg0zsTa+K4Yn5vzgBjkgofJWCa+WavfGB83+WsWJ4iWnlItT0tny2tY9aF3mVN1bjq1HDJQ7Fe88ZVxpjOLQ2LWIG/sldrV34hAb2RkeVMUanPDgoLwG+7RVXNjZpBVs7HzWCmw2OKYBMruAJVWrWOA9LljTdCgWaEe+J7HDmtzbhjXl39+sYklgl0MaxIcY3Q/47pitghtWWmNXgKGdDjZgoU068mor7ow/NCXiVmwaDFL2SdvCEN8fvqxBin285yW6xig+kKg8aNv2SrWKj4XL/NTbzhoftB0v2otQeKsGyLH4tInYOL3ViJnNcj2f4/L5HP8CS6Elf8pppe4AAAAASUVORK5CYII=",Z="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAkCAMAAAA5HAOUAAAAAXNSR0IArs4c6QAAADlQTFRFR3BM////////////////////////////////////////////////////////////////////////fTyWTQAAABJ0Uk5TABAeLEBIWmJwf4yfrcDR3+/5fB4v8wAAATVJREFUeNqFlNuOwyAMBYFcgYCd+f+P3W0R9aYN23kBKRNzsCXcmCnJqSUG9x+RhixfpLNWgLG2AtE7Fw5QP7Iq7G1XIA6kANIvAXVgLVgBgWEss8rQmqC4hlfkLc66zu1CClNvCfkSpgCQQ/smj9XtQLhpNjK1zBwxFSC+SSXFLK3KRkcnk0L/KQgccwHDcllIrzzRvG9bLACuU6BXTgB17ofsalZF+3Z7SxyiWTb6fTzfDP2MA+bx5MS/dm6EgMzO+QjsQ2tSQOUE8lDyUemUVyy/+L/SroCRfY9xOCMBHFtwzs9RLBkUkwpwWO1NWD6tBLpdQnr3Ya3ctjH8AvWxtIjET0cwWql60z6uVrl/CVL5BfSxPA9UN8LSC2f4bkVAxKjrneWFK3JnuZAv3pnMSvoc1Q84hRs/TR04NAAAAABJRU5ErkJggg==",$="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADEAAAAwCAMAAACPHmKLAAAAAXNSR0IArs4c6QAAACdQTFRFR3BM////////////////////////////////////////////////DaKZigAAAAx0Uk5TABcvP09pf4+iv9rvctFlTwAAAOxJREFUeNrd1sGuhCAMheHTIlDKef/nvZGMmUwsZEgmd+G3sZs/amUhHkwkCQBJw2tWzJVOMkE6T++5CmLGk0J4uWZHKJN2BE+VjCyINDpijQ0RZ0GssG8XnGzqQCx5xb9L1SwDWgUxqcf9w7XVm+fPXVUGxWpXwt0ibxflacX6XEXF2m+K9bmKivW5+tl2DTGj3wsfU0YkkXYvOiCd9NYEsDa8Zie73AsmQJ0kDyiH99wVQeECIFcr58WGa86CoBjJdzIvnhXfSFzICEjfLVA5d2D3JgkhnSaOCXWGumIqR01TrIimTyqP/Qf5A6vYGN0YUCWvAAAAAElFTkSuQmCC",ee="_our_friend_m8wra_1",ne="_avatar_m8wra_10",se="_name_friend_m8wra_23",te="_line_m8wra_37",A={our_friend:ee,avatar:ne,name_friend:se,line:te},ie="_btn_s617q_1",re="_imgDiamond_s617q_26",p={btn:ie,imgDiamond:re};function oe({onClick:s}){return e.jsxs("button",{className:p.btn,onClick:s,children:[e.jsx("img",{src:y,className:p.imgDiamond}),"Забрать"]})}const ae="_modal_content_1r141_1",ce="_btn2_1r141_11",me="_imgPrize_1r141_41",_e="_imgFon_1r141_48",le="_text_prize_1r141_52",d={modal_content:ae,btn2:ce,imgPrize:me,imgFon:_e,text_prize:le},Ae="/assets/imgFonModal-BofEVgY9.png",de="/assets/imgPrize-D6fD6u1v.png";function ge({onClose:s}){return e.jsxs(e.Fragment,{children:[" ",e.jsx("img",{src:Ae,className:d.imgFon}),e.jsx("p",{className:d.text_prize,children:"Твоя награда"}),e.jsx("img",{className:d.imgPrize,src:de}),e.jsx("button",{onClick:s,className:d.btn2,children:"Забрать"})]})}function fe({friendData:s}){const{tg:i,tg_id:c}=j(),[g,r]=l.useState(!1),f=u({mutationFn:t=>v(t.name_box,t.tg_id),onSuccess:()=>{}},a),x=u({mutationFn:t=>L(t.tg_id,t.referral_system_id),onSuccess:t=>{f.mutate({name_box:t.name_box,tg_id:c}),a.invalidateQueries({queryKey:["listFriends"]})}},a),m=()=>{x.mutate({tg_id:c,referral_system_id:s.referral_system_id}),i.HapticFeedback.impactOccurred("light"),r(!0)},_=()=>{r(!1),i.HapticFeedback.impactOccurred("light")};return e.jsxs("div",{className:A.our_friend,children:[e.jsx(w,{isOpen:g,children:e.jsx(ge,{onClose:_})}),e.jsx("img",{src:C,className:A.avatar}),e.jsx("p",{className:A.name_friend,children:s.name}),s.flag&&e.jsx(oe,{onClick:m}),e.jsx("div",{className:A.line})]})}const xe="/assets/boxFon-B2G7jpg0.png";function ye(){const{tg_id:s,tg:i}=j(),[c,g]=l.useState([]),[r,f]=l.useState(""),x=()=>{const o=`https://t.me/share/url?url=${r}`;i.openTelegramLink(o),i.HapticFeedback.impactOccurred("light")},m=b({queryKey:["refLink"],queryFn:()=>z(s)},a);l.useEffect(()=>{m.data&&f(m.data.ref_link)},[m]);const _=b({queryKey:["listFriends"],queryFn:()=>E(s)},a);l.useEffect(()=>{_.data&&g(_.data)},[_.data]);const t=()=>{i.HapticFeedback.impactOccurred("light"),a.invalidateQueries({queryKey:["listFriends"]})},B=async()=>{try{r&&(i.HapticFeedback.impactOccurred("light"),await navigator.clipboard.writeText(r),R.success("Ссылка  скопирована",{position:"top-center",autoClose:2e3,hideProgressBar:!0,closeOnClick:!1,pauseOnHover:!1,draggable:!1,progress:void 0,theme:"dark",transition:h}))}catch(o){console.log(o)}};return e.jsxs(F,{children:[e.jsx(N,{}),e.jsxs("div",{className:n.container,children:[e.jsxs("div",{className:n.main_box,children:[e.jsx("p",{className:n.text_slogan,children:"Приглашайте ваших друзей!"}),e.jsx("button",{onClick:B,className:n.btn_copy,children:e.jsx("img",{className:n.iconBtnCopy,src:$})}),e.jsxs("button",{onClick:x,className:n.btn_ref,children:["ПРИГЛАСИТЬ ДРУГА",e.jsx("img",{className:n.iconBtnRef,src:Z})]}),e.jsx("img",{className:n.imgBoxFon,src:xe})]}),e.jsxs("div",{className:n.your_referrals,children:[e.jsx("p",{className:n.your_referrals_title,children:"Ваши друзья"})," ",e.jsx("button",{onClick:t,className:n.btn_return,children:e.jsx("img",{src:Y,className:n.imgBtnReturn})})]}),e.jsxs("div",{className:n.box_our_friends,children:[c.length?c.map(o=>e.jsx(fe,{friendData:o},o.player_id)):e.jsxs("div",{className:n.box_no_friends,children:[e.jsx("img",{className:n.imgEnotNoFriend,src:Q}),e.jsx("p",{className:n.text_no_friends,children:"Вы еще никого не пригласили"})]}),e.jsx(k,{})]})]})]})}export{ye as default};
