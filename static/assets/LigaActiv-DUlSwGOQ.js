import{u as b,j as s,r as c,D as L}from"./index-BuGGXnwb.js";import{H as B}from"./Header-9hk64Cy-.js";import{i as j}from"./imgCoin-DwLBqyid.js";import{u as A,q as h,x as F}from"./gueryClient-Tsn-KKGH.js";import{b as f,u as p,f as $}from"./formatNumber-DAT3ywLA.js";import{i as S}from"./avatarFrend-L-lXDPIn.js";const U="_container_1kh71_1",q="_box_league_1kh71_10",D="_imgBoxFon_1kh71_20",H="_name_league_1kh71_25",P="_imgEnot_1kh71_42",z="_btn_left_1kh71_48",I="_btn_right_1kh71_66",O="_box_progress_1kh71_84",Q="_progress_1kh71_93",V="_progress_bar_1kh71_103",X="_title_cost_1kh71_114",J="_iconCoin_1kh71_127",K="_box_all_users_1kh71_134",n={container:U,box_league:q,imgBoxFon:D,name_league:H,imgEnot:P,btn_left:z,btn_right:I,box_progress:O,progress:Q,progress_bar:V,title_cost:X,iconCoin:J,box_all_users:K},R="_box_card_1dwhi_1",W="_box_your_card_1dwhi_11",Z="_imgAvatar_1dwhi_26",T="_user_info_1dwhi_31",Y="_name_user_1dwhi_40",G="_coin_window_1dwhi_52",M="_coins_1dwhi_57",ss="_imgCoin_1dwhi_71",es="_line_1dwhi_79",ns="_number_position_1dwhi_87",ts="_leaders_1dwhi_96",os="_text_index_1dwhi_106",t={box_card:R,box_your_card:W,imgAvatar:Z,user_info:T,name_user:Y,coin_window:G,coins:M,imgCoin:ss,line:es,number_position:ns,leaders:ts,text_index:os};function as({user:o,index:g}){const{tg_id:e}=b();return s.jsxs("div",{className:+e!==o.tg_id?t.box_card:t.box_your_card,children:[s.jsx("img",{src:S,className:t.imgAvatar}),s.jsxs("div",{className:t.user_info,children:[s.jsx("p",{className:t.name_user,children:o.name}),s.jsxs("div",{className:t.coin_window,children:[s.jsx("img",{src:j,className:t.imgCoin}),s.jsx("p",{className:t.coins,children:f(o.coin)})]})]}),s.jsx("div",{className:g<=3?`${t.number_position} ${t.leaders}`:t.number_position,children:s.jsx("p",{className:t.text_index,children:g})}),+e!==o.tg_id&&s.jsx("div",{className:t.line})]})}const rs="/assets/woodenEnot-BVv5zd6W.png",is="/assets/stoneEnot-BzhVZHcx.png",cs="/assets/ironEnot-DSQv0t38.png",_s="/assets/bronzeEnot-9eJgkS59.png",ls="/assets/silverEnot-CWlVjY3g.png",gs="/assets/goldEnot-D8RmB_l8.png",ms="/assets/platinumEnot-BUOACsjX.png",ds="/assets/rubyEnot-CvX7weox.png",us="/assets/emeraldEnot-DhJs5jX5.png",xs="/assets/sapphireEnot-ByZ5PEka.png",hs=o=>{switch(o){case"Деревянная Лига":return rs;case"Каменная Лига":return is;case"Железная Лига":return cs;case"Бронзовая Лига":return _s;case"Серебряная Лига":return ls;case"Золотая Лига":return gs;case"Платиновая Лига":return ms;case"Рубиновая Лига":return ds;case"Изумрудная Лига":return us;case"Сапфировая Лига":return xs}},ps="/assets/bgLeague-B0AfPP7P.png";function ks(){const o=p(a=>{var i;return(i=a.dataUser.getUser)==null?void 0:i.coin}),g=p(a=>{var i;return(i=a.dataUser.getUser)==null?void 0:i.league})||"Деревянная Лига",[e,w]=c.useState(),[_,N]=c.useState(),[r,d]=c.useState(0),[v,u]=c.useState(g),{tg:x,tg_id:k}=b(),m=["Деревянная Лига","Каменная Лига","Железная Лига","Бронзовая Лига","Серебряная Лига","Золотая Лига","Платиновая Лига","Изумрудная Лига","Рубиновая Лига","Сапфировая Лига"],C=()=>{r<m.length-1&&(d(r+1),u(m[r+1]),x.HapticFeedback.impactOccurred("light"))},E=()=>{r>0&&(d(r-1),u(m[r-1]),x.HapticFeedback.impactOccurred("light"))},{data:l}=A({queryKey:["dataLeagues"],queryFn:()=>F(v)},h);c.useEffect(()=>{l&&(w(l),N(l[0].players))},[l,e]),c.useEffect(()=>{h.invalidateQueries({queryKey:["dataLeagues"]})},[r]);const y=()=>{if(e&&o&&e[0].min_coin)return o*100/(e[0].min_coin*10)};return s.jsxs(L,{children:[s.jsx(B,{}),s.jsxs("div",{className:n.container,children:[s.jsxs("div",{className:n.box_league,children:[s.jsx("img",{className:n.imgBoxFon,src:ps}),(e==null?void 0:e.length)&&s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:n.name_league,children:e[0].name}),s.jsx("img",{className:n.imgEnot,src:hs(e[0].name)})]}),s.jsx("button",{onClick:()=>E(),className:n.btn_left}),s.jsx("button",{onClick:()=>C(),className:n.btn_right}),s.jsxs("div",{className:n.box_progress,children:[s.jsx("img",{src:j,className:n.iconCoin}),l&&e&&o&&s.jsx("span",{className:n.title_cost,children:`${f(o)} / ${$(e[0].min_coin*10)}`})]}),(_==null?void 0:_.filter(a=>a.tg_id===+k).length)===1&&s.jsx("div",{className:n.progress,children:s.jsx("div",{className:n.progress_bar,style:{width:`${y()}%`}})})]}),s.jsx("div",{className:n.box_all_users,children:_&&_.map((a,i)=>s.jsx(as,{user:a,index:i+1},a.tg_id))})]})]})}export{ks as default};
