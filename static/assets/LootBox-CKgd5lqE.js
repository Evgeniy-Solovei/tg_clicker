import{j as s,u as F,r as n,m as Q,n as $,o as G}from"./index-BPTOnH0W.js";import{D as K}from"./Dialog-CTu58RMk.js";import{h as L,q as m,i as A,u as T,H as w,j as H}from"./Header-QCvmX2-_.js";import{a as E,b as I,u as y}from"./useMutation-DXhys1-M.js";const M="_root_1t7lj_1",O="_container_1t7lj_14",U="_box_1t7lj_23",X="_imgBox1_1t7lj_35",Y="_imgEnotBack_1t7lj_46",Z="_slogan_1t7lj_57",J="_show_1t7lj_1",a={root:M,container:O,box:U,imgBox1:X,imgEnotBack:Y,slogan:Z,show:J},z="/assets/coinPrize-CayVTFUQ.png",j="/assets/energyPrize-CL1jtWuk.png",B="/assets/diamondsPrize-B0oiZMmn.png",k="/assets/botPrize-CLn2oDfX.png",R="/assets/skinPrize-Csi9GH01.png",v="/assets/box1-D3XQbKnU.png",C="/assets/box2-_a3OpZPI.png",D="/assets/box3-BQ05YlqY.png",V="/assets/EnotBackground-DEyn0Py-.png",W="_container_box_prize_pl1j4_1",ss="_box_prize_pl1j4_11",es="_imgEnotFace_pl1j4_17",os="_loot_box_pl1j4_28",is="_imgBox_pl1j4_36",ts="_imgBumble_pl1j4_43",ns="_box_info_prize_pl1j4_51",cs="_possible_prize_pl1j4_61",rs="_title_prize_pl1j4_76",as="_box_getting_prize_pl1j4_84",_s="_getting_prize_pl1j4_90",ms="_imgPrize_pl1j4_99",ls="_imgPrize1_pl1j4_103",xs="_icon_prize_pl1j4_107",o={container_box_prize:W,box_prize:ss,imgEnotFace:es,loot_box:os,imgBox:is,imgBumble:ts,box_info_prize:ns,possible_prize:cs,title_prize:rs,box_getting_prize:as,getting_prize:_s,imgPrize:ms,imgPrize1:ls,icon_prize:xs},gs="_btn_1sx9u_1",ps="_btn2_1sx9u_16",q={btn:gs,btn2:ps};function bs({...t}){return s.jsx("button",{...t,className:q.btn,children:"Получить"})}const us="/assets/EnotFaceBackground-CJx_fDe-.png",zs="/assets/bumbleLight-_3kQzhIG.png";function js({...t}){return s.jsx("button",{...t,className:q.btn2,children:"Забрать"})}function P({box:t,lootBox1:i,imgBox:x}){const{tg_id:g}=F(),[c,r]=n.useState([]),[_,p]=n.useState(),{mutate:b}=E({mutationFn:e=>L(e.name_box),onSuccess:e=>{r(e),m.invalidateQueries({queryKey:["userData"]}),m.invalidateQueries({queryKey:["boxesData"]})}},m),d=E({mutationFn:e=>A(e.prizes,e.tg_id),onSuccess:e=>{p(e),m.invalidateQueries({queryKey:["userData"]}),m.invalidateQueries({queryKey:["boosterData"]})},onError:e=>{console.log(e)}},m),[u,h]=n.useState(1),N=()=>{(i==null?void 0:i.name)==="Bronze"&&b({name_box:"Bronze"}),(i==null?void 0:i.name)=="Silver"&&b({name_box:"Silver"}),(i==null?void 0:i.name)=="Gold"&&b({name_box:"Gold"}),h(2)},f=()=>{d.mutate({tg_id:g,prizes:c}),r([])};return n.useEffect(()=>{console.log(c)},[c]),s.jsxs("div",{className:o.container_box_prize,children:[s.jsx("img",{src:us,className:o.imgEnotFace}),u==1&&s.jsxs("div",{className:o.box_prize,children:[s.jsxs("div",{className:o.loot_box,children:[s.jsx("img",{src:zs,className:o.imgBumble}),s.jsx("img",{className:o.imgBox,src:t})]}),s.jsxs("div",{className:o.box_info_prize,children:[s.jsx("p",{className:o.title_prize,children:"Ты можешь получить:"}),s.jsx("div",{className:o.possible_prize,children:x.map((e,l)=>s.jsx("img",{className:o.icon_prize,src:e},l))}),s.jsx(bs,{onClick:N})]})]}),u==2&&s.jsxs("div",{className:o.box_getting_prize,children:[_?s.jsx("p",{className:o.title_prize,children:_.Success}):s.jsx("p",{className:o.title_prize,children:"Твоя награда!"}),s.jsx("div",{className:o.getting_prize,children:c.map((e,l)=>{if(e.prize_name==="Coin Boosts")return s.jsx("img",{className:o.imgPrize,src:z},l);if(e.prize_name==="Energy Boosts")return s.jsx("img",{className:o.imgPrize,src:j},l);if(e.prize_name==="Dimonds")return s.jsx("img",{className:o.imgPrize,src:B},l);if(e.prize_name==="Bot Boosts")return s.jsx("img",{className:o.imgPrize,src:k},l)})}),!_&&s.jsx(js,{onClick:f,title:"Забрать"})]})]})}const Bs="_box_mth5q_1",ds="_imgBox1_mth5q_13",S={box:Bs,imgBox1:ds},hs=({onClick:t,imgBox:i})=>s.jsx("div",{onClick:t,className:S.box,children:s.jsx("img",{className:S.imgBox1,src:i})}),Ns=n.memo(hs);function Es(){const[t,i]=n.useState(0),x=I(),[g,c]=n.useState([]),{data:r}=T({queryKey:["boxesData"],queryFn:()=>H()},m);n.useEffect(()=>{r&&(x(Q(r[0])),x($(r[1])),x(G(r[2])))},[r]);const[_,p]=n.useState(""),b=y(e=>e.lootBox1.box),d=y(e=>e.lootBox2.box),u=y(e=>e.lootBox3.box),h=()=>{i(1),p(v),c([z,j,B])},N=()=>{i(2),p(C),c([z,j,B,k])},f=()=>{i(3),p(D),c([z,j,B,k,R])};return s.jsxs(K,{children:[s.jsx(w,{}),s.jsxs("div",{className:a.root,children:[t==0&&s.jsxs("div",{children:[s.jsx("h1",{className:a.slogan,children:"Текст призыв нажать на сундук"}),s.jsx("img",{src:V,className:a.imgEnotBack})]}),t==1&&s.jsx(P,{box:_,lootBox1:b,imgBox:g}),t==2&&s.jsx(P,{box:_,lootBox1:d,imgBox:g}),t==3&&s.jsx(P,{box:_,lootBox1:u,imgBox:g}),s.jsxs("div",{className:a.container,children:[s.jsx(Ns,{imgBox:v,onClick:h}),s.jsx("div",{onClick:N,className:a.box,children:s.jsx("img",{className:a.imgBox1,src:C})}),s.jsx("div",{onClick:f,className:a.box,children:s.jsx("img",{className:a.imgBox1,src:D})})]})]})]})}export{Es as default};
